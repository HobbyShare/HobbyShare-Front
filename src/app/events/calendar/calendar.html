<div class="calendar-container p-4  bg-white rounded-lg shadow-md border border-gray-200">
  @if (isLoading()) {
    <div class="loading text-center p-8">
      <p>Loading calendar...</p>
    </div>
  } @else {
    <full-calendar [options]="options()"></full-calendar>
  }



<!-- â¬…ï¸ MODAL DEL EVENTO -->
<dialog id="event_modal" class="modal">
  <div class="modal-box">
    <!-- BotÃ³n cerrar -->
    <form method="dialog">
      <button
        type="button"
        class="btn btn-sm btn-circle btn-ghost absolute right-2 top-2"
        (click)="closeModal()">
        âœ•
      </button>
    </form>

    @if (selectedEvent()) {
      <h3 class="text-2xl font-bold mb-4">{{ selectedEvent()!.title }}</h3>

      <div class="space-y-3">
        <div>
          <strong>ğŸ“ Description:</strong>
          <p class="text-gray-700 mt-1">{{ selectedEvent()!.description }}</p>
        </div>

        <div>
          <strong>ğŸ“… Date:</strong>
          <p>{{ selectedEvent()!.date | date:'fullDate' }}</p>
        </div>

        <div>
          <strong>ğŸ·ï¸ Hobby:</strong>
          <p>{{ selectedEvent()!.hobby }}</p>
        </div>

        <div>
          <strong>ğŸ‘¤ Creator:</strong>
          <p>{{ selectedEvent()!.creatorUser }}</p>
        </div>

        <div>
          <strong>ğŸ‘¥ Participants:</strong>
          <p>{{ selectedEvent()!.participants.length }} people joined</p>
        </div>
      </div>

      <!-- Botones de acciÃ³n -->
      <div class="modal-action mt-6">
        @if (isCreator()) {
          <button
            type="button"
            class="border-2 border-amber-100 text-stone-900 bg-amber-100 rounded-xl
                  shadow-lg hover:shadow-2xl hover:scale-105 hover:bg-amber-200
                  hover:text-gray-950 transition-all duration-300 px-3 md:px-5 py-1.5 md:py-2
                  font-semibold text-sm md:text-base"
            (click)="deleteEvent()">
            ğŸ—‘ï¸ Delete Event
          </button>
        } @else if (isParticipant()) {
          <button
            type="button"
            class="border-2 border-amber-100 text-stone-900 bg-amber-100 rounded-xl
                  shadow-lg hover:shadow-2xl hover:scale-105 hover:bg-amber-200
                  hover:text-gray-950 transition-all duration-300 px-3 md:px-5 py-1.5 md:py-2
                  font-semibold text-sm md:text-base"
            (click)="leaveEvent()">
            ğŸšª Leave Event
          </button>
        } @else {
          <button
            type="button"
            class="border-2 border-amber-100 text-stone-900 bg-amber-100 rounded-xl
                  shadow-lg hover:shadow-2xl hover:scale-105 hover:bg-amber-200
                  hover:text-gray-950 transition-all duration-300 px-3 md:px-5 py-1.5 md:py-2
                  font-semibold text-sm md:text-base"
            (click)="joinEvent()">
            âœ… Join Event
          </button>
        }

        <button
          type="button"
          class="border-2 border-amber-100 text-stone-900 bg-amber-100 rounded-xl
                  shadow-lg hover:shadow-2xl hover:scale-105 hover:bg-amber-200
                  hover:text-gray-950 transition-all duration-300 px-3 md:px-5 py-1.5 md:py-2
                  font-semibold text-sm md:text-base"
          (click)="closeModal()">
          Close
        </button>
      </div>
    } @else {
      <p>No event selected</p>
    }
  </div>

  <!-- Fondo del modal (clickeable para cerrar) -->
  <form method="dialog" class="modal-backdrop">
    <button type="button" (click)="closeModal()">close</button>
  </form>
</dialog>
