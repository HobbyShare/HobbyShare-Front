<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>

<div class="flex justify-center w-full h-full">
  <div [class.cursor-crosshair]="mode === 'select'"
       class="relative flex flex-col w-[85%] h-full">

    <div class="flex flex-wrap items-center justify-end gap-4 py-3 bg-transparent border-b-2 border-gray-200 md:flex-row md:items-center">

      <button
        type="button"
        (click)="getLocation()"
        class="rounded-3xl bg-indigo-500 px-4 py-2 text-sm font-medium text-white transition-all hover:bg-indigo-700 active:scale-95 cursor-pointer"
        [attr.aria-label]="mode ==='select' ? 'Usar mi ubicaci贸n' : 'Mostrar mi ubicaci贸n'">
         {{ mode === 'select' ? 'Usar mi ubicaci贸n' : 'Mi ubicaci贸n' }}
      </button>

      @if (mode === 'select' && selectedLocation()) {
        <div class="flex items-center w-full gap-2 px-4 py-2 bg-blue-50 rounded-xl md:w-auto">
          <span class="text-sm font-semibold text-gray-600">Coordenadas:</span>
          <span class="font-mono text-sm font-medium text-blue-600">
            {{ selectedLocation()!.lat.toFixed(6) }}, {{ selectedLocation()!.lng.toFixed(6) }}
          </span>
        </div>
      }
    </div>

    <div [id]="containerId"
         class="z-1 min-h-112.5 w-full flex-1 rounded-3xl md:min-h-112.5">
    </div>

    @if (mode === 'select') {
      <div class="p-4 border-t border-yellow-400 bg-yellow-50 rounded-b-3xl">
        <p class="m-1 text-sm text-yellow-800"> <strong class="text-yellow-900">Haz clic en el mapa</strong> para seleccionar la ubicaci贸n del evento</p>
        <p class="m-1 text-sm text-yellow-800"> Puedes arrastrar el marcador para ajustar la posici贸n</p>
      </div>
    }
  </div>
</div>
